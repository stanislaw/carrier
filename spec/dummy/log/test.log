  [1m[36m (40.0ms)[0m  [1mSET search_path TO public[0m
  [1m[35m (0.0ms)[0m  select current_database()
  [1m[36m (30.0ms)[0m  [1mselect table_name from information_schema.views where table_schema = 'distant_test'[0m
  [1m[35m (0.0ms)[0m  DROP "schema_migrations";
PGError: ERROR:  syntax error at or near ""schema_migrations""
LINE 1: DROP "schema_migrations";
             ^
: DROP "schema_migrations";
  [1m[36m (0.0ms)[0m  [1mSET search_path TO public[0m
  [1m[35m (100.0ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "roles" DISABLE TRIGGER ALL;ALTER TABLE "user_roles" DISABLE TRIGGER ALL;ALTER TABLE "items_cmodules" DISABLE TRIGGER ALL;ALTER TABLE "cycles" DISABLE TRIGGER ALL;ALTER TABLE "cmodules" DISABLE TRIGGER ALL;ALTER TABLE "techniques" DISABLE TRIGGER ALL;ALTER TABLE "course_cmodules" DISABLE TRIGGER ALL;ALTER TABLE "chains" DISABLE TRIGGER ALL;ALTER TABLE "courses" DISABLE TRIGGER ALL;ALTER TABLE "questions" DISABLE TRIGGER ALL;ALTER TABLE "materials" DISABLE TRIGGER ALL;ALTER TABLE "course_relations" DISABLE TRIGGER ALL;ALTER TABLE "read_marks" DISABLE TRIGGER ALL;ALTER TABLE "answers" DISABLE TRIGGER ALL;ALTER TABLE "contracts" DISABLE TRIGGER ALL;ALTER TABLE "questionnaire_statuses" DISABLE TRIGGER ALL;ALTER TABLE "questionnaire_versions" DISABLE TRIGGER ALL;ALTER TABLE "messages" DISABLE TRIGGER ALL;ALTER TABLE "formulars" DISABLE TRIGGER ALL;ALTER TABLE "course_instructors" DISABLE TRIGGER ALL;ALTER TABLE "workbooks" DISABLE TRIGGER ALL;ALTER TABLE "associated_courses" DISABLE TRIGGER ALL;ALTER TABLE "associated_course_instructors" DISABLE TRIGGER ALL;ALTER TABLE "having_materials" DISABLE TRIGGER ALL;ALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "activities" DISABLE TRIGGER ALL;ALTER TABLE "news" DISABLE TRIGGER ALL;ALTER TABLE "reports" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "game_statistics" DISABLE TRIGGER ALL;ALTER TABLE "games" DISABLE TRIGGER ALL;ALTER TABLE "consultations" DISABLE TRIGGER ALL;ALTER TABLE "public_events" DISABLE TRIGGER ALL;ALTER TABLE "games_cmodules" DISABLE TRIGGER ALL;ALTER TABLE "contract_terms" DISABLE TRIGGER ALL;ALTER TABLE "contacts" DISABLE TRIGGER ALL;ALTER TABLE "questionnaires" DISABLE TRIGGER ALL
  [1m[36m (0.0ms)[0m  [1mselect current_database()[0m
  [1m[35m (0.0ms)[0m  select table_name from information_schema.views where table_schema = 'distant_test'
  [1m[36m (1330.0ms)[0m  [1mTRUNCATE TABLE "roles", "user_roles", "items_cmodules", "cycles", "cmodules", "techniques", "course_cmodules", "chains", "courses", "questions", "materials", "course_relations", "read_marks", "answers", "contracts", "questionnaire_statuses", "questionnaire_versions", "messages", "formulars", "course_instructors", "workbooks", "associated_courses", "associated_course_instructors", "having_materials", "payments", "activities", "news", "reports", "users", "game_statistics", "games", "consultations", "public_events", "games_cmodules", "contract_terms", "contacts", "questionnaires" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.0ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "roles" ENABLE TRIGGER ALL;ALTER TABLE "user_roles" ENABLE TRIGGER ALL;ALTER TABLE "items_cmodules" ENABLE TRIGGER ALL;ALTER TABLE "cycles" ENABLE TRIGGER ALL;ALTER TABLE "questions" ENABLE TRIGGER ALL;ALTER TABLE "materials" ENABLE TRIGGER ALL;ALTER TABLE "formulars" ENABLE TRIGGER ALL;ALTER TABLE "course_instructors" ENABLE TRIGGER ALL;ALTER TABLE "workbooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "cmodules" ENABLE TRIGGER ALL;ALTER TABLE "techniques" ENABLE TRIGGER ALL;ALTER TABLE "course_cmodules" ENABLE TRIGGER ALL;ALTER TABLE "chains" ENABLE TRIGGER ALL;ALTER TABLE "courses" ENABLE TRIGGER ALL;ALTER TABLE "course_relations" ENABLE TRIGGER ALL;ALTER TABLE "read_marks" ENABLE TRIGGER ALL;ALTER TABLE "answers" ENABLE TRIGGER ALL;ALTER TABLE "contracts" ENABLE TRIGGER ALL;ALTER TABLE "questionnaire_statuses" ENABLE TRIGGER ALL;ALTER TABLE "questionnaire_versions" ENABLE TRIGGER ALL;ALTER TABLE "messages" ENABLE TRIGGER ALL;ALTER TABLE "associated_courses" ENABLE TRIGGER ALL;ALTER TABLE "associated_course_instructors" ENABLE TRIGGER ALL;ALTER TABLE "having_materials" ENABLE TRIGGER ALL;ALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "activities" ENABLE TRIGGER ALL;ALTER TABLE "news" ENABLE TRIGGER ALL;ALTER TABLE "reports" ENABLE TRIGGER ALL;ALTER TABLE "game_statistics" ENABLE TRIGGER ALL;ALTER TABLE "games" ENABLE TRIGGER ALL;ALTER TABLE "consultations" ENABLE TRIGGER ALL;ALTER TABLE "public_events" ENABLE TRIGGER ALL;ALTER TABLE "games_cmodules" ENABLE TRIGGER ALL;ALTER TABLE "contract_terms" ENABLE TRIGGER ALL;ALTER TABLE "contacts" ENABLE TRIGGER ALL;ALTER TABLE "questionnaires" ENABLE TRIGGER ALL
  [1m[36m (0.0ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to DeviseCreateUsers (20110122155748)
Migrating to CreateMessagesMaChains (20110601143508)
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (150.0ms)[0m  [1mCREATE TABLE "messages_ma_chains" ("id" serial primary key, "participants" character varying(255) DEFAULT '--- []

', "archived_for" character varying(255) DEFAULT '--- []

', "having_chain_id" integer, "having_chain_type" character varying(255), "chain_type" character varying(255) DEFAULT '--- :simple
', "messages_count" integer DEFAULT 0, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (20.0ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'messages_ma_chains'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname IN ('public') )
 ORDER BY i.relname
  [1m[36m (10.0ms)[0m  [1mCREATE INDEX "participants_and_archived_index" ON "messages_ma_chains" ("archived_for", "participants")[0m
  [1m[35m (0.0ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'messages_ma_chains'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname IN ('public') )
 ORDER BY i.relname
  [1m[36mColumns for index participants_and_archived_index on messages_ma_chains (0.0ms)[0m  [1m SELECT a.attnum, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 175659
 AND a.attnum IN (3,2)
[0m
  [1m[35m (10.0ms)[0m  CREATE INDEX "having_index" ON "messages_ma_chains" ("having_chain_id", "having_chain_type")
  [1m[36m (0.0ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'messages_ma_chains'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname IN ('public') )
 ORDER BY i.relname
[0m
  [1m[35mColumns for index having_index on messages_ma_chains (0.0ms)[0m   SELECT a.attnum, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 175659
 AND a.attnum IN (4,5)
  [1m[36mColumns for index participants_and_archived_index on messages_ma_chains (0.0ms)[0m  [1m SELECT a.attnum, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 175659
 AND a.attnum IN (3,2)
[0m
  [1m[35m (10.0ms)[0m  CREATE INDEX "index_messages_ma_chains_on_created_at" ON "messages_ma_chains" ("created_at")
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110601143508')[0m
  [1m[35m (0.0ms)[0m  COMMIT
Migrating to CreateMessagesMaMessages (20110601143509)
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (30.0ms)[0m  CREATE TABLE "messages_ma_messages" ("id" serial primary key, "from" integer, "to" character varying(255) DEFAULT '--- []

', "subject" character varying(255), "message_type" character varying(255), "content" text, "created_at" timestamp, "updated_at" timestamp, "chain_id" integer) 
  [1m[36m (0.0ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'messages_ma_messages'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname IN ('public') )
 ORDER BY i.relname
[0m
  [1m[35m (10.0ms)[0m  CREATE INDEX "index_messages_ma_messages_on_created_at" ON "messages_ma_messages" ("created_at")
  [1m[36m (0.0ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'messages_ma_messages'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname IN ('public') )
 ORDER BY i.relname
[0m
  [1m[35mColumns for index index_messages_ma_messages_on_created_at on messages_ma_messages (0.0ms)[0m   SELECT a.attnum, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 175677
 AND a.attnum IN (7)
  [1m[36m (10.0ms)[0m  [1mCREATE INDEX "index_messages_ma_messages_on_chain_id" ON "messages_ma_messages" ("chain_id")[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20110601143509')
  [1m[36m (0.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateReadMarks (20110601171138)
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (40.0ms)[0m  [1mDROP TABLE "read_marks"[0m
  [1m[35m (10.0ms)[0m  CREATE TABLE "read_marks" ("id" serial primary key, "readable_id" integer, "user_id" integer NOT NULL, "readable_type" character varying(20) NOT NULL, "timestamp" timestamp) 
  [1m[36m (0.0ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'read_marks'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname IN ('public') )
 ORDER BY i.relname
[0m
  [1m[35m (10.0ms)[0m  CREATE INDEX "index_read_marks_on_user_id_and_readable_type_and_readable_id" ON "read_marks" ("user_id", "readable_type", "readable_id")
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20110601171138')[0m
  [1m[35m (0.0ms)[0m  COMMIT
  [1m[36m (0.0ms)[0m  [1mSET search_path TO public[0m
  [1m[35m (0.0ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "roles" DISABLE TRIGGER ALL;ALTER TABLE "user_roles" DISABLE TRIGGER ALL;ALTER TABLE "items_cmodules" DISABLE TRIGGER ALL;ALTER TABLE "cycles" DISABLE TRIGGER ALL;ALTER TABLE "questions" DISABLE TRIGGER ALL;ALTER TABLE "materials" DISABLE TRIGGER ALL;ALTER TABLE "formulars" DISABLE TRIGGER ALL;ALTER TABLE "course_instructors" DISABLE TRIGGER ALL;ALTER TABLE "workbooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "cmodules" DISABLE TRIGGER ALL;ALTER TABLE "techniques" DISABLE TRIGGER ALL;ALTER TABLE "course_cmodules" DISABLE TRIGGER ALL;ALTER TABLE "chains" DISABLE TRIGGER ALL;ALTER TABLE "courses" DISABLE TRIGGER ALL;ALTER TABLE "course_relations" DISABLE TRIGGER ALL;ALTER TABLE "answers" DISABLE TRIGGER ALL;ALTER TABLE "contracts" DISABLE TRIGGER ALL;ALTER TABLE "questionnaire_statuses" DISABLE TRIGGER ALL;ALTER TABLE "questionnaire_versions" DISABLE TRIGGER ALL;ALTER TABLE "messages" DISABLE TRIGGER ALL;ALTER TABLE "associated_courses" DISABLE TRIGGER ALL;ALTER TABLE "associated_course_instructors" DISABLE TRIGGER ALL;ALTER TABLE "having_materials" DISABLE TRIGGER ALL;ALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "activities" DISABLE TRIGGER ALL;ALTER TABLE "news" DISABLE TRIGGER ALL;ALTER TABLE "reports" DISABLE TRIGGER ALL;ALTER TABLE "game_statistics" DISABLE TRIGGER ALL;ALTER TABLE "games" DISABLE TRIGGER ALL;ALTER TABLE "consultations" DISABLE TRIGGER ALL;ALTER TABLE "public_events" DISABLE TRIGGER ALL;ALTER TABLE "games_cmodules" DISABLE TRIGGER ALL;ALTER TABLE "contract_terms" DISABLE TRIGGER ALL;ALTER TABLE "contacts" DISABLE TRIGGER ALL;ALTER TABLE "questionnaires" DISABLE TRIGGER ALL;ALTER TABLE "messages_ma_chains" DISABLE TRIGGER ALL;ALTER TABLE "messages_ma_messages" DISABLE TRIGGER ALL;ALTER TABLE "read_marks" DISABLE TRIGGER ALL
  [1m[36m (0.0ms)[0m  [1mselect current_database()[0m
  [1m[35m (0.0ms)[0m  select table_name from information_schema.views where table_schema = 'distant_test'
  [1m[36m (970.0ms)[0m  [1mTRUNCATE TABLE "roles", "user_roles", "items_cmodules", "cycles", "questions", "materials", "formulars", "course_instructors", "workbooks", "users", "cmodules", "techniques", "course_cmodules", "chains", "courses", "course_relations", "answers", "contracts", "questionnaire_statuses", "questionnaire_versions", "messages", "associated_courses", "associated_course_instructors", "having_materials", "payments", "activities", "news", "reports", "game_statistics", "games", "consultations", "public_events", "games_cmodules", "contract_terms", "contacts", "questionnaires", "messages_ma_chains", "messages_ma_messages", "read_marks" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.0ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "roles" ENABLE TRIGGER ALL;ALTER TABLE "user_roles" ENABLE TRIGGER ALL;ALTER TABLE "items_cmodules" ENABLE TRIGGER ALL;ALTER TABLE "cycles" ENABLE TRIGGER ALL;ALTER TABLE "questions" ENABLE TRIGGER ALL;ALTER TABLE "materials" ENABLE TRIGGER ALL;ALTER TABLE "formulars" ENABLE TRIGGER ALL;ALTER TABLE "course_instructors" ENABLE TRIGGER ALL;ALTER TABLE "workbooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "cmodules" ENABLE TRIGGER ALL;ALTER TABLE "techniques" ENABLE TRIGGER ALL;ALTER TABLE "course_cmodules" ENABLE TRIGGER ALL;ALTER TABLE "chains" ENABLE TRIGGER ALL;ALTER TABLE "courses" ENABLE TRIGGER ALL;ALTER TABLE "course_relations" ENABLE TRIGGER ALL;ALTER TABLE "answers" ENABLE TRIGGER ALL;ALTER TABLE "contracts" ENABLE TRIGGER ALL;ALTER TABLE "questionnaire_statuses" ENABLE TRIGGER ALL;ALTER TABLE "questionnaire_versions" ENABLE TRIGGER ALL;ALTER TABLE "messages" ENABLE TRIGGER ALL;ALTER TABLE "associated_courses" ENABLE TRIGGER ALL;ALTER TABLE "associated_course_instructors" ENABLE TRIGGER ALL;ALTER TABLE "having_materials" ENABLE TRIGGER ALL;ALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "activities" ENABLE TRIGGER ALL;ALTER TABLE "news" ENABLE TRIGGER ALL;ALTER TABLE "reports" ENABLE TRIGGER ALL;ALTER TABLE "game_statistics" ENABLE TRIGGER ALL;ALTER TABLE "games" ENABLE TRIGGER ALL;ALTER TABLE "consultations" ENABLE TRIGGER ALL;ALTER TABLE "public_events" ENABLE TRIGGER ALL;ALTER TABLE "games_cmodules" ENABLE TRIGGER ALL;ALTER TABLE "contract_terms" ENABLE TRIGGER ALL;ALTER TABLE "contacts" ENABLE TRIGGER ALL;ALTER TABLE "questionnaires" ENABLE TRIGGER ALL;ALTER TABLE "messages_ma_chains" ENABLE TRIGGER ALL;ALTER TABLE "messages_ma_messages" ENABLE TRIGGER ALL;ALTER TABLE "read_marks" ENABLE TRIGGER ALL
  [1m[36m (0.0ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to DeviseCreateUsers (20110122155748)
Migrating to CreateMessagesMaChains (20110601143508)
Migrating to CreateMessagesMaMessages (20110601143509)
Migrating to CreateReadMarks (20110601171138)


Started GET "/messages_ma/messages" for 127.0.0.1 at 2011-08-11 03:24:09 +0300
  Processing by MessagesMa::MessagesController#index as HTML
  [1m[35mUser Load (20.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
Completed 404 Not Found in 30ms
  [1m[36m (0.0ms)[0m  [1mSET search_path TO public[0m
  [1m[35m (10.0ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "roles" DISABLE TRIGGER ALL;ALTER TABLE "user_roles" DISABLE TRIGGER ALL;ALTER TABLE "items_cmodules" DISABLE TRIGGER ALL;ALTER TABLE "cycles" DISABLE TRIGGER ALL;ALTER TABLE "questions" DISABLE TRIGGER ALL;ALTER TABLE "materials" DISABLE TRIGGER ALL;ALTER TABLE "formulars" DISABLE TRIGGER ALL;ALTER TABLE "course_instructors" DISABLE TRIGGER ALL;ALTER TABLE "workbooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "cmodules" DISABLE TRIGGER ALL;ALTER TABLE "techniques" DISABLE TRIGGER ALL;ALTER TABLE "course_cmodules" DISABLE TRIGGER ALL;ALTER TABLE "chains" DISABLE TRIGGER ALL;ALTER TABLE "courses" DISABLE TRIGGER ALL;ALTER TABLE "course_relations" DISABLE TRIGGER ALL;ALTER TABLE "answers" DISABLE TRIGGER ALL;ALTER TABLE "contracts" DISABLE TRIGGER ALL;ALTER TABLE "questionnaire_statuses" DISABLE TRIGGER ALL;ALTER TABLE "questionnaire_versions" DISABLE TRIGGER ALL;ALTER TABLE "messages" DISABLE TRIGGER ALL;ALTER TABLE "associated_courses" DISABLE TRIGGER ALL;ALTER TABLE "associated_course_instructors" DISABLE TRIGGER ALL;ALTER TABLE "having_materials" DISABLE TRIGGER ALL;ALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "activities" DISABLE TRIGGER ALL;ALTER TABLE "news" DISABLE TRIGGER ALL;ALTER TABLE "reports" DISABLE TRIGGER ALL;ALTER TABLE "game_statistics" DISABLE TRIGGER ALL;ALTER TABLE "games" DISABLE TRIGGER ALL;ALTER TABLE "consultations" DISABLE TRIGGER ALL;ALTER TABLE "public_events" DISABLE TRIGGER ALL;ALTER TABLE "games_cmodules" DISABLE TRIGGER ALL;ALTER TABLE "contract_terms" DISABLE TRIGGER ALL;ALTER TABLE "contacts" DISABLE TRIGGER ALL;ALTER TABLE "questionnaires" DISABLE TRIGGER ALL;ALTER TABLE "messages_ma_chains" DISABLE TRIGGER ALL;ALTER TABLE "messages_ma_messages" DISABLE TRIGGER ALL;ALTER TABLE "read_marks" DISABLE TRIGGER ALL
  [1m[36m (0.0ms)[0m  [1mselect current_database()[0m
  [1m[35m (0.0ms)[0m  select table_name from information_schema.views where table_schema = 'distant_test'
  [1m[36m (1340.0ms)[0m  [1mTRUNCATE TABLE "roles", "user_roles", "items_cmodules", "cycles", "questions", "materials", "formulars", "course_instructors", "workbooks", "users", "cmodules", "techniques", "course_cmodules", "chains", "courses", "course_relations", "answers", "contracts", "questionnaire_statuses", "questionnaire_versions", "messages", "associated_courses", "associated_course_instructors", "having_materials", "payments", "activities", "news", "reports", "game_statistics", "games", "consultations", "public_events", "games_cmodules", "contract_terms", "contacts", "questionnaires", "messages_ma_chains", "messages_ma_messages", "read_marks" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.0ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "contracts" ENABLE TRIGGER ALL;ALTER TABLE "questionnaire_statuses" ENABLE TRIGGER ALL;ALTER TABLE "roles" ENABLE TRIGGER ALL;ALTER TABLE "user_roles" ENABLE TRIGGER ALL;ALTER TABLE "questionnaire_versions" ENABLE TRIGGER ALL;ALTER TABLE "items_cmodules" ENABLE TRIGGER ALL;ALTER TABLE "cycles" ENABLE TRIGGER ALL;ALTER TABLE "messages" ENABLE TRIGGER ALL;ALTER TABLE "associated_courses" ENABLE TRIGGER ALL;ALTER TABLE "associated_course_instructors" ENABLE TRIGGER ALL;ALTER TABLE "having_materials" ENABLE TRIGGER ALL;ALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "questions" ENABLE TRIGGER ALL;ALTER TABLE "materials" ENABLE TRIGGER ALL;ALTER TABLE "activities" ENABLE TRIGGER ALL;ALTER TABLE "news" ENABLE TRIGGER ALL;ALTER TABLE "reports" ENABLE TRIGGER ALL;ALTER TABLE "game_statistics" ENABLE TRIGGER ALL;ALTER TABLE "games" ENABLE TRIGGER ALL;ALTER TABLE "formulars" ENABLE TRIGGER ALL;ALTER TABLE "course_instructors" ENABLE TRIGGER ALL;ALTER TABLE "workbooks" ENABLE TRIGGER ALL;ALTER TABLE "consultations" ENABLE TRIGGER ALL;ALTER TABLE "public_events" ENABLE TRIGGER ALL;ALTER TABLE "games_cmodules" ENABLE TRIGGER ALL;ALTER TABLE "contract_terms" ENABLE TRIGGER ALL;ALTER TABLE "contacts" ENABLE TRIGGER ALL;ALTER TABLE "questionnaires" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "messages_ma_chains" ENABLE TRIGGER ALL;ALTER TABLE "cmodules" ENABLE TRIGGER ALL;ALTER TABLE "techniques" ENABLE TRIGGER ALL;ALTER TABLE "course_cmodules" ENABLE TRIGGER ALL;ALTER TABLE "chains" ENABLE TRIGGER ALL;ALTER TABLE "courses" ENABLE TRIGGER ALL;ALTER TABLE "course_relations" ENABLE TRIGGER ALL;ALTER TABLE "answers" ENABLE TRIGGER ALL;ALTER TABLE "messages_ma_messages" ENABLE TRIGGER ALL;ALTER TABLE "read_marks" ENABLE TRIGGER ALL
  [1m[36m (0.0ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to DeviseCreateUsers (20110122155748)
Migrating to CreateMessagesMaChains (20110601143508)
Migrating to CreateMessagesMaMessages (20110601143509)
Migrating to CreateReadMarks (20110601171138)


Started GET "/messages_ma/messages" for 127.0.0.1 at 2011-08-11 03:27:49 +0300
  Processing by MessagesMa::MessagesController#index as HTML
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (30.0ms)[0m  INSERT INTO "users" ("about_me", "avatar_content_type", "avatar_file_name", "avatar_file_size", "avatar_updated_at", "city", "created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "middlename", "mobile_number", "name", "passport", "real_address", "remember_created_at", "remember_token", "reset_password_token", "sign_in_count", "surname", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"  [["about_me", nil], ["avatar_content_type", nil], ["avatar_file_name", nil], ["avatar_file_size", nil], ["avatar_updated_at", nil], ["city", nil], ["created_at", Thu, 11 Aug 2011 00:27:50 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", ""], ["encrypted_password", ""], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["middlename", nil], ["mobile_number", nil], ["name", nil], ["passport", nil], ["real_address", nil], ["remember_created_at", nil], ["remember_token", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["surname", nil], ["updated_at", Thu, 11 Aug 2011 00:27:50 UTC +00:00], ["username", "stanislaw"]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "read_marks" WHERE "read_marks"."readable_type" = 'MessagesMa::Message' AND "read_marks"."user_id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "read_marks" ("readable_id", "readable_type", "timestamp", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"  [["readable_id", nil], ["readable_type", "MessagesMa::Message"], ["timestamp", Thu, 11 Aug 2011 00:27:50 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35mReadMark Load (0.0ms)[0m  SELECT "read_marks".* FROM "read_marks" WHERE "read_marks"."user_id" = 1 AND "read_marks"."readable_type" = 'MessagesMa::Message' AND "read_marks"."readable_id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "messages_ma_messages" LEFT JOIN read_marks ON read_marks.readable_type = 'MessagesMa::Message'
 AND read_marks.readable_id = messages_ma_messages.id
 AND read_marks.user_id = 1
 AND read_marks.timestamp >= messages_ma_messages.created_at WHERE ("to" ~ '\D1\D') AND (read_marks.id IS NULL AND messages_ma_messages.created_at > '2011-08-11 00:27:50')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" LIMIT 1
Rendered /home/stanislaw/_work_/mountable_apps/messages_ma/app/views/messages_ma/messages/_nav_messages.html.erb (0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(count_column) FROM (SELECT 1 AS count_column FROM "messages_ma_chains" WHERE ("participants" ~ '\D1\D') AND ("archived_for" !~ '\D1\D') LIMIT 25 OFFSET 0) subquery_for_count [0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "messages_ma_chains" WHERE ("participants" ~ '\D1\D') AND ("archived_for" !~ '\D1\D')
Completed 200 OK in 440ms (Views: 150.0ms | ActiveRecord: 50.0ms)
